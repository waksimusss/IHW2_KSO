# Домашнее задание №2
## Работу выполнил Максимов Никита Иванович БПИ227
Работы выполнена на оценку 10
---
# Как пользоваться программой
Проект представляет из себя двухмодульное приложение. В репозитроии представлены 2 проекта: RestaurantClient и Server.

Перед запуском приложения необходимо убедиться, что сервер уже активен, поскольку он является основой для работы клиентского приложения. Сервер разворачивает свой функционал на локальном устройстве и обрабатывает запросы типа GET и POST. Весь бэкэнд реализован в этой части программы. Любые взаимодействия с сервером, такие как создание нового заказа или изменение меню, логируются в файле logs.log для удобства отслеживания действий системным администратором и разработчиком.

Клиентское приложение, RestaurantClient, запускается после того, как сервер активен. Оно отправляет запросы на сервер, получает ответы и отображает их в консоли. Кроме того, клиентская часть отвечает за взаимодействие с пользователем, проверку вводимых данных и т.д. В случае необходимости, консольное приложение может быть заменено на полноценный веб-сайт.

После запуска Server и RestarauntClient пользователю станет видно удобное меню приложения в следующем формате:
![image](https://github.com/waksimusss/IHW2_KSO/assets/113054845/56df04a4-acc6-4beb-a54b-1fccc573ea3e)

Дальше пользователь волен делать то, что захочет, но для начала рекомендуется зарегистрироваться в системе как посетитель или администратор. Далее же рекомендуется зайти в систему, введя данные от вашего аккаунта.
После входа, в зависимости от роли пользователя, ему предоставиться одно из двух меню:

1) Для администратора:
   
![image](https://github.com/waksimusss/IHW2_KSO/assets/113054845/c67cfa0f-e43b-4fef-9cc9-90d5f3d501b1)

2) Для посетителя:
   
![image](https://github.com/waksimusss/IHW2_KSO/assets/113054845/48867ad5-0a20-405f-b422-39a34d94b3f0)

Кстати, стоит отметить, что после входа в аккаунт, создается определенный ключ-токен, который определяет разрешенные действия для того или иного аккаунта да бы избежать ошибок. Время работы токена около часа, после придется снова вводить логин и пароль.

---
# Паттерны проектирования

В нашем проекте шаблон фасада играет ключевую роль. Фасад предоставляет простой интерфейс к сложной системе классов, что особенно заметно в классах Admin и Visitor. Эти классы содержат методы, требующие определенные параметры для работы, которые затем передаются в более сложные системы, например, в OrderSystem. В OrderSystem реализована основная логика работы приложения, включая управление заказами, их отмену, а также работу с многопоточностью. Кроме того, класс System является общим фасадом, инкапсулирующим работу всех систем. Он также выступает в роли фасада для AuthentificationSystem, системы управления безопасностью, через которую осуществляются все регистрации и входы в систему.

Почему? В нашем случае фасад позволяет скрыть сложность внутренней структуры системы и предоставить простой интерфейс для взаимодействия с ней. Это особенно важно для пользователя, которому необходимо управлять системой легко и интуитивно понятно. Также использование фасада обеспечивает соблюдение принципа инкапсуляции, что делает систему более модульной и удобной для разработчиков.

В нашем проекте также активно используется шаблон Singleton. В некоторых ситуациях критически важно, чтобы существовал только один экземпляр определенного объекта. Например, логгер должен быть единственным, чтобы избежать дублирования данных. Важным преимуществом синглетона является его способность обеспечивать единственный экземпляр объекта, к которому можно обращаться из любой точки программы. В нашем проекте синглетонами являются объект-шифрователь, логгер, сериализатор и TokenSystem.

Почему? Использование синглетонов обеспечивает единую точку доступа к объекту, гарантируя его единственность и предотвращая создание лишних экземпляров.

Еще одним шаблоном, который мы применяем, является Proxy. Прокси используется для создания специальных объектов-заменителей вместо реальных объектов. Они перехватывают вызовы к оригинальным объектам, что позволяет выполнить определенные действия до или после передачи вызова оригиналу. В нашем проекте примером использования прокси является OrderSystem. Она контролирует доступ к определенным методам, например, проверяя, имеет ли пользователь право на доступ к заказу, прежде чем предоставить ему эту возможность.

Почему? Применение прокси позволяет обеспечить безопасность проекта и предотвратить несанкционированный доступ к определенным ресурсам.

---
# Основные моменты

### Отзывы
Пользователи имеют возможность оставлять отзывы о заказах после их завершения. Отзыв состоит из оценки и комментария. Администратор может просматривать статистику ресторана, включая среднюю оценку заказов, среднее количество блюд в заказе и суммарную выручку.

### Многопоточность
Обработка заказов происходит в многопоточном режиме, где каждый заказ обрабатывается в отдельном потоке. При отмене заказа поток прерывается, но программа не выходит из строя. При этом время готовки заказа учитывается, чтобы поток "заснул" на соответствующее время.

### Авторизация и безопасность 
Для обеспечения безопасности сессий пользователей в нашем проекте используется генерация токенов - зашифрованных ключей, уникально идентифицирующих пользователей. При входе пользователя в систему генерируется токен и передается пользователю (в случае работы с клиентским приложением, без прямых запросов через API). Токен обеспечивает безопасность операций, так как пользователь не может получить доступ к конфиденциальной информации других пользователей. Кроме того, срок действия сессии пользователя может быть ограничен.

### Хранение данных
Данные хранятся в формате JSON в файлах и сохраняются после каждой операции, что гарантирует сохранность пользовательских данных даже при отключении сервера или других аварийных ситуациях. Важно отметить, что данные хранятся в зашифрованном виде, что снижает риск утечки информации. При десериализации данные расшифровываются и программа продолжает свою работу в обычном формате. Все личные данные, включая пароль пользователя, передаются в зашифрованном виде для обеспечения безопасности.

### Другое
1) Система приоритетов и очередью
Они позволяют обрабатывать заказы с учетом их важности. Если заказов больше, чем сервер может обработать одновременно, они ставятся в очередь с приоритетами, и первым из очереди выбирается заказ с наивысшим приоритетом.

3) Уровни пользователей.
В системе предусмотрены уровни пользователей, определяемые на основе количества совершенных заказов. Это позволяет дифференцировать права пользователей в зависимости от их активности в системе.